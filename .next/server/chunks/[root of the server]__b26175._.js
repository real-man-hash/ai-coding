module.exports = {

"[externals]/ [external] (next/dist/compiled/next-server/app-route.runtime.dev.js, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("next/dist/compiled/next-server/app-route.runtime.dev.js");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (@opentelemetry/api, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("@opentelemetry/api");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (next/dist/compiled/next-server/app-page.runtime.dev.js, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("next/dist/compiled/next-server/app-page.runtime.dev.js");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (next/dist/server/app-render/prerender-async-storage.external.js, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("next/dist/server/app-render/prerender-async-storage.external.js");

module.exports = mod;

}.call(this) }),
"[project]/ai/custom-middleware.ts [app-route] (ecmascript)": (({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__ }) => (() => {
"use strict";

__turbopack_esm__({
    "customMiddleware": ()=>customMiddleware
});
const customMiddleware = {};

})()),
"[project]/ai/index.ts [app-route] (ecmascript)": (({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__ }) => (() => {
"use strict";

__turbopack_esm__({
    "geminiFlashModel": ()=>geminiFlashModel,
    "geminiProModel": ()=>geminiProModel
});
var __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$custom$2d$middleware$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/ai/custom-middleware.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$ai$40$3$2e$4$2e$9_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_svelte$40$4$2e$2$2e$18_vue$40$3$2e$4$2e$35_zod$40$3$2e$23$2e$8$2f$node_modules$2f$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/node_modules/.pnpm/ai@3.4.9_react@19.0.0-rc-7771d3a7-20240827_svelte@4.2.18_vue@3.4.35_zod@3.23.8/node_modules/ai/dist/index.mjs [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$ai$2d$sdk$2b$google$40$0$2e$0$2e$51_zod$40$3$2e$23$2e$8$2f$node_modules$2f40$ai$2d$sdk$2f$google$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/@ai-sdk+google@0.0.51_zod@3.23.8/node_modules/@ai-sdk/google/dist/index.mjs [app-route] (ecmascript)");
"__TURBOPACK__ecmascript__hoisting__location__";
;
;
;
const geminiProModel = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$ai$40$3$2e$4$2e$9_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_svelte$40$4$2e$2$2e$18_vue$40$3$2e$4$2e$35_zod$40$3$2e$23$2e$8$2f$node_modules$2f$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["experimental_wrapLanguageModel"])({
    model: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$ai$2d$sdk$2b$google$40$0$2e$0$2e$51_zod$40$3$2e$23$2e$8$2f$node_modules$2f40$ai$2d$sdk$2f$google$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["google"])("gemini-2.5-pro"),
    middleware: __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$custom$2d$middleware$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["customMiddleware"]
});
const geminiFlashModel = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$ai$40$3$2e$4$2e$9_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_svelte$40$4$2e$2$2e$18_vue$40$3$2e$4$2e$35_zod$40$3$2e$23$2e$8$2f$node_modules$2f$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["experimental_wrapLanguageModel"])({
    model: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$ai$2d$sdk$2b$google$40$0$2e$0$2e$51_zod$40$3$2e$23$2e$8$2f$node_modules$2f40$ai$2d$sdk$2f$google$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["google"])("gemini-2.5-flash"),
    middleware: __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$custom$2d$middleware$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["customMiddleware"]
});

})()),
"[project]/ai/actions.ts [app-route] (ecmascript)": (({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__ }) => (() => {
"use strict";

__turbopack_esm__({
    "generateReservationPrice": ()=>generateReservationPrice,
    "generateSampleFlightSearchResults": ()=>generateSampleFlightSearchResults,
    "generateSampleFlightStatus": ()=>generateSampleFlightStatus,
    "generateSampleSeatSelection": ()=>generateSampleSeatSelection
});
var __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/ai/index.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$ai$40$3$2e$4$2e$9_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_svelte$40$4$2e$2$2e$18_vue$40$3$2e$4$2e$35_zod$40$3$2e$23$2e$8$2f$node_modules$2f$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/node_modules/.pnpm/ai@3.4.9_react@19.0.0-rc-7771d3a7-20240827_svelte@4.2.18_vue@3.4.35_zod@3.23.8/node_modules/ai/dist/index.mjs [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/zod@3.23.8/node_modules/zod/lib/index.mjs [app-route] (ecmascript)");
"__TURBOPACK__ecmascript__hoisting__location__";
;
;
;
async function generateSampleFlightStatus({ flightNumber, date }) {
    const { object: flightStatus } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$ai$40$3$2e$4$2e$9_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_svelte$40$4$2e$2$2e$18_vue$40$3$2e$4$2e$35_zod$40$3$2e$23$2e$8$2f$node_modules$2f$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["generateObject"])({
        model: __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["geminiFlashModel"],
        prompt: `Flight status for flight number ${flightNumber} on ${date}`,
        schema: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
            flightNumber: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Flight number, e.g., BA123, AA31"),
            departure: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                cityName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Name of the departure city"),
                airportCode: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("IATA code of the departure airport"),
                airportName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Full name of the departure airport"),
                timestamp: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("ISO 8601 departure date and time"),
                terminal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Departure terminal"),
                gate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Departure gate")
            }),
            arrival: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                cityName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Name of the arrival city"),
                airportCode: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("IATA code of the arrival airport"),
                airportName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Full name of the arrival airport"),
                timestamp: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("ISO 8601 arrival date and time"),
                terminal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Arrival terminal"),
                gate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Arrival gate")
            }),
            totalDistanceInMiles: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].number().describe("Total flight distance in miles")
        })
    });
    return flightStatus;
}
async function generateSampleFlightSearchResults({ origin, destination }) {
    const { object: flightSearchResults } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$ai$40$3$2e$4$2e$9_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_svelte$40$4$2e$2$2e$18_vue$40$3$2e$4$2e$35_zod$40$3$2e$23$2e$8$2f$node_modules$2f$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["generateObject"])({
        model: __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["geminiFlashModel"],
        prompt: `Generate search results for flights from ${origin} to ${destination}, limit to 4 results`,
        output: "array",
        schema: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
            id: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Unique identifier for the flight, like BA123, AA31, etc."),
            departure: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                cityName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Name of the departure city"),
                airportCode: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("IATA code of the departure airport"),
                timestamp: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("ISO 8601 departure date and time")
            }),
            arrival: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                cityName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Name of the arrival city"),
                airportCode: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("IATA code of the arrival airport"),
                timestamp: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("ISO 8601 arrival date and time")
            }),
            airlines: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Airline names, e.g., American Airlines, Emirates")),
            priceInUSD: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].number().describe("Flight price in US dollars"),
            numberOfStops: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].number().describe("Number of stops during the flight")
        })
    });
    return {
        flights: flightSearchResults
    };
}
async function generateSampleSeatSelection({ flightNumber }) {
    const { object: rows } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$ai$40$3$2e$4$2e$9_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_svelte$40$4$2e$2$2e$18_vue$40$3$2e$4$2e$35_zod$40$3$2e$23$2e$8$2f$node_modules$2f$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["generateObject"])({
        model: __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["geminiFlashModel"],
        prompt: `Simulate available seats for flight number ${flightNumber}, 6 seats on each row and 5 rows in total, adjust pricing based on location of seat`,
        output: "array",
        schema: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
            seatNumber: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Seat identifier, e.g., 12A, 15C"),
            priceInUSD: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].number().describe("Seat price in US dollars, less than $99"),
            isAvailable: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].boolean().describe("Whether the seat is available for booking")
        }))
    });
    return {
        seats: rows
    };
}
async function generateReservationPrice(props) {
    const { object: reservation } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$ai$40$3$2e$4$2e$9_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_svelte$40$4$2e$2$2e$18_vue$40$3$2e$4$2e$35_zod$40$3$2e$23$2e$8$2f$node_modules$2f$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["generateObject"])({
        model: __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["geminiFlashModel"],
        prompt: `Generate price for the following reservation \n\n ${JSON.stringify(props, null, 2)}`,
        schema: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
            totalPriceInUSD: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].number().describe("Total reservation price in US dollars")
        })
    });
    return reservation;
}

})()),
"[externals]/ [external] (node:crypto, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("node:crypto");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (node:buffer, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("node:buffer");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (node:util, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("node:util");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (node:crypto, cjs) <export randomFillSync as default>": (({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__ }) => (() => {
"use strict";

__turbopack_esm__({
    "default": ()=>__TURBOPACK__imported__module__$5b$externals$5d2f$__$5b$external$5d$__$28$node$3a$crypto$2c$__cjs$29$__["randomFillSync"]
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$__$5b$external$5d$__$28$node$3a$crypto$2c$__cjs$29$__ = __turbopack_import__("[externals]/ [external] (node:crypto, cjs)");
"__TURBOPACK__ecmascript__hoisting__location__";

})()),
"[externals]/ [external] (crypto, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("crypto");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (next/dist/client/components/request-async-storage.external.js, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("next/dist/client/components/request-async-storage.external.js");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (next/dist/client/components/static-generation-async-storage.external.js, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("next/dist/client/components/static-generation-async-storage.external.js");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (next/dist/client/components/action-async-storage.external.js, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("next/dist/client/components/action-async-storage.external.js");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (events, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("events");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (process, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("process");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (net, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("net");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (tls, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("tls");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (timers, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("timers");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (stream, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("stream");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (buffer, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("buffer");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (string_decoder, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("string_decoder");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (zlib, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("zlib");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (util, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("util");

module.exports = mod;

}.call(this) }),
"[externals]/ [external] (url, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("url");

module.exports = mod;

}.call(this) }),
"[project]/db/schema.ts [app-route] (ecmascript)": (({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__ }) => (() => {
"use strict";

__turbopack_esm__({
    "chat": ()=>chat,
    "reservation": ()=>reservation,
    "user": ()=>user
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$table$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/drizzle-orm@0.34.0_@types+react@18.3.3_mysql2@3.15.3_react@19.0.0-rc-7771d3a7-20240827/node_modules/drizzle-orm/mysql-core/table.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$char$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/drizzle-orm@0.34.0_@types+react@18.3.3_mysql2@3.15.3_react@19.0.0-rc-7771d3a7-20240827/node_modules/drizzle-orm/mysql-core/columns/char.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$varchar$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/drizzle-orm@0.34.0_@types+react@18.3.3_mysql2@3.15.3_react@19.0.0-rc-7771d3a7-20240827/node_modules/drizzle-orm/mysql-core/columns/varchar.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$timestamp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/drizzle-orm@0.34.0_@types+react@18.3.3_mysql2@3.15.3_react@19.0.0-rc-7771d3a7-20240827/node_modules/drizzle-orm/mysql-core/columns/timestamp.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$json$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/drizzle-orm@0.34.0_@types+react@18.3.3_mysql2@3.15.3_react@19.0.0-rc-7771d3a7-20240827/node_modules/drizzle-orm/mysql-core/columns/json.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$boolean$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/drizzle-orm@0.34.0_@types+react@18.3.3_mysql2@3.15.3_react@19.0.0-rc-7771d3a7-20240827/node_modules/drizzle-orm/mysql-core/columns/boolean.js [app-route] (ecmascript)");
"__TURBOPACK__ecmascript__hoisting__location__";
;
const user = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$table$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["mysqlTable"])("user", {
    id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$char$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["char"])("id", {
        length: 36
    }).primaryKey().notNull().$defaultFn(()=>crypto.randomUUID()),
    email: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$varchar$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["varchar"])("email", {
        length: 64
    }).notNull(),
    password: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$varchar$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["varchar"])("password", {
        length: 64
    }),
    createdAt: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$timestamp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["timestamp"])("createdAt").notNull().defaultNow(),
    updatedAt: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$timestamp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["timestamp"])("updatedAt").onUpdateNow()
});
const chat = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$table$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["mysqlTable"])("chat", {
    id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$char$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["char"])("id", {
        length: 36
    }).primaryKey().notNull().$defaultFn(()=>crypto.randomUUID()),
    createdAt: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$timestamp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["timestamp"])("createdAt").notNull().defaultNow(),
    updatedAt: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$timestamp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["timestamp"])("updatedAt").onUpdateNow(),
    messages: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$json$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["json"])("messages").notNull(),
    userId: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$char$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["char"])("userId", {
        length: 36
    }).notNull().references(()=>user.id, {
        onDelete: 'cascade'
    })
});
const reservation = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$table$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["mysqlTable"])("reservation", {
    id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$char$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["char"])("id", {
        length: 36
    }).primaryKey().notNull().$defaultFn(()=>crypto.randomUUID()),
    createdAt: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$timestamp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["timestamp"])("createdAt").notNull().defaultNow(),
    updatedAt: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$timestamp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["timestamp"])("updatedAt").onUpdateNow(),
    details: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$json$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["json"])("details").notNull(),
    hasCompletedPayment: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$boolean$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["boolean"])("hasCompletedPayment").notNull().default(false),
    userId: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql$2d$core$2f$columns$2f$char$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["char"])("userId", {
        length: 36
    }).notNull().references(()=>user.id, {
        onDelete: 'cascade'
    })
});

})()),
"[externals]/ [external] (node:events, cjs)": (function({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: require }) { !function() {

const mod = __turbopack_external_require__("node:events");

module.exports = mod;

}.call(this) }),
"[project]/db/queries.ts [app-route] (ecmascript)": (({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__ }) => (() => {
"use strict";

__turbopack_esm__({
    "createReservation": ()=>createReservation,
    "createUser": ()=>createUser,
    "deleteChatById": ()=>deleteChatById,
    "getChatById": ()=>getChatById,
    "getChatsByUserId": ()=>getChatsByUserId,
    "getReservationById": ()=>getReservationById,
    "getUser": ()=>getUser,
    "saveChat": ()=>saveChat,
    "updateReservation": ()=>updateReservation
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$40$15$2e$0$2e$0$2d$canary$2e$152_react$2d$dom$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$server$2d$only$2f$empty$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/next@15.0.0-canary.152_react-dom@19.0.0-rc-7771d3a7-20240827_react@19.0.0-rc-7771d3a7-20240827/node_modules/next/dist/compiled/server-only/empty.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$bcrypt$2d$ts$40$5$2e$0$2e$2$2f$node_modules$2f$bcrypt$2d$ts$2f$dist$2f$node$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/bcrypt-ts@5.0.2/node_modules/bcrypt-ts/dist/node.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$mysql2$40$3$2e$15$2e$3$2f$node_modules$2f$mysql2$2f$promise$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/mysql2@3.15.3/node_modules/mysql2/promise.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/db/schema.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql2$2f$driver$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/node_modules/.pnpm/drizzle-orm@0.34.0_@types+react@18.3.3_mysql2@3.15.3_react@19.0.0-rc-7771d3a7-20240827/node_modules/drizzle-orm/mysql2/driver.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/drizzle-orm@0.34.0_@types+react@18.3.3_mysql2@3.15.3_react@19.0.0-rc-7771d3a7-20240827/node_modules/drizzle-orm/sql/expressions/conditions.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$select$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/drizzle-orm@0.34.0_@types+react@18.3.3_mysql2@3.15.3_react@19.0.0-rc-7771d3a7-20240827/node_modules/drizzle-orm/sql/expressions/select.js [app-route] (ecmascript)");
"__TURBOPACK__ecmascript__hoisting__location__";
;
;
;
;
;
;
// Create a connection pool
const pool = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$mysql2$40$3$2e$15$2e$3$2f$node_modules$2f$mysql2$2f$promise$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].createPool({
    uri: process.env.DATABASE_URL,
    waitForConnections: true,
    connectionLimit: 10,
    queueLimit: 0
});
const db = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$mysql2$2f$driver$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["drizzle"])(pool);
async function getUser(email) {
    try {
        const result = await db.select().from(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["user"]).where((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["eq"])(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["user"].email, email));
        return result || [];
    } catch (error) {
        console.error("Failed to get user from database", error);
        return [];
    }
}
async function createUser(email, password) {
    const connection = await pool.getConnection();
    try {
        await connection.beginTransaction();
        const salt = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$bcrypt$2d$ts$40$5$2e$0$2e$2$2f$node_modules$2f$bcrypt$2d$ts$2f$dist$2f$node$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["genSaltSync"])(10);
        const hash = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$bcrypt$2d$ts$40$5$2e$0$2e$2$2f$node_modules$2f$bcrypt$2d$ts$2f$dist$2f$node$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["hashSync"])(password, salt);
        // First insert the user
        await db.insert(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["user"]).values({
            email,
            password: hash,
            createdAt: new Date(),
            updatedAt: new Date()
        });
        // Then fetch the newly created user
        const [newUser] = await db.select().from(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["user"]).where((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["eq"])(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["user"].email, email)).limit(1);
        await connection.commit();
        if (!newUser) {
            throw new Error('Failed to retrieve created user');
        }
        return newUser;
    } catch (error) {
        await connection.rollback();
        console.error("Failed to create user in database", error);
        throw error;
    } finally{
        connection.release();
    }
}
async function saveChat({ id, messages, userId }) {
    const connection = await pool.getConnection();
    try {
        await connection.beginTransaction();
        const existingChat = await db.select().from(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"]).where((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["eq"])(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"].id, id));
        let result;
        if (existingChat.length > 0) {
            [result] = await db.update(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"]).set({
                messages: JSON.stringify(messages),
                updatedAt: new Date()
            }).where((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["eq"])(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"].id, id));
        } else {
            [result] = await db.insert(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"]).values({
                id,
                messages: JSON.stringify(messages),
                userId,
                createdAt: new Date(),
                updatedAt: new Date()
            });
        }
        await connection.commit();
        // Fetch the saved chat to return
        const [savedChat] = await db.select().from(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"]).where((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["eq"])(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"].id, id)).limit(1);
        return savedChat;
    } catch (error) {
        await connection.rollback();
        console.error("Failed to save chat to database", error);
        throw error;
    } finally{
        connection.release();
    }
}
async function deleteChatById({ id }) {
    const connection = await pool.getConnection();
    try {
        await connection.beginTransaction();
        await db.delete(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"]).where((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["eq"])(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"].id, id));
        await connection.commit();
    } catch (error) {
        await connection.rollback();
        console.error("Failed to delete chat from database", error);
        throw error;
    } finally{
        connection.release();
    }
}
async function getChatsByUserId({ id }) {
    try {
        return await db.select().from(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"]).where((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["eq"])(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"].userId, id)).orderBy((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$select$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["desc"])(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"].createdAt));
    } catch (error) {
        console.error("Failed to get chats from database", error);
        throw error;
    }
}
async function getChatById({ id }) {
    try {
        const [result] = await db.select().from(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"]).where((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["eq"])(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["chat"].id, id)).limit(1);
        return result;
    } catch (error) {
        console.error("Failed to get chat from database", error);
        throw error;
    }
}
async function createReservation({ id, userId, details }) {
    const connection = await pool.getConnection();
    try {
        await connection.beginTransaction();
        await db.insert(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reservation"]).values({
            id,
            userId,
            details: JSON.stringify(details),
            createdAt: new Date(),
            updatedAt: new Date(),
            hasCompletedPayment: false
        });
        await connection.commit();
        // Fetch the created reservation to return
        const [newReservation] = await db.select().from(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reservation"]).where((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["eq"])(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reservation"].id, id)).limit(1);
        return newReservation;
    } catch (error) {
        await connection.rollback();
        console.error("Failed to create reservation in database", error);
        throw error;
    } finally{
        connection.release();
    }
}
async function getReservationById({ id }) {
    try {
        const [selectedReservation] = await db.select().from(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reservation"]).where((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["eq"])(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reservation"].id, id));
        return selectedReservation;
    } catch (error) {
        console.error("Failed to get reservation from database", error);
        throw error;
    }
}
async function updateReservation({ id, hasCompletedPayment }) {
    const connection = await pool.getConnection();
    try {
        await connection.beginTransaction();
        await db.update(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reservation"]).set({
            hasCompletedPayment,
            updatedAt: new Date()
        }).where((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["eq"])(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reservation"].id, id));
        await connection.commit();
        // Fetch the updated reservation to return
        const [updatedReservation] = await db.select().from(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reservation"]).where((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$drizzle$2d$orm$40$0$2e$34$2e$0_$40$types$2b$react$40$18$2e$3$2e$3_mysql2$40$3$2e$15$2e$3_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$drizzle$2d$orm$2f$sql$2f$expressions$2f$conditions$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["eq"])(__TURBOPACK__imported__module__$5b$project$5d2f$db$2f$schema$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["reservation"].id, id)).limit(1);
        return updatedReservation;
    } catch (error) {
        await connection.rollback();
        console.error("Failed to update reservation in database", error);
        throw error;
    } finally{
        connection.release();
    }
}

})()),
"[project]/app/(auth)/auth.config.ts [app-route] (ecmascript)": (({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__ }) => (() => {
"use strict";

__turbopack_esm__({
    "authConfig": ()=>authConfig
});
const authConfig = {
    pages: {
        signIn: "/login",
        newUser: "/"
    },
    providers: [],
    callbacks: {
        authorized ({ auth, request: { nextUrl } }) {
            let isLoggedIn = !!auth?.user;
            let isOnChat = nextUrl.pathname.startsWith("/");
            let isOnRegister = nextUrl.pathname.startsWith("/register");
            let isOnLogin = nextUrl.pathname.startsWith("/login");
            if (isLoggedIn && (isOnLogin || isOnRegister)) {
                return Response.redirect(new URL("/", nextUrl));
            }
            if (isOnRegister || isOnLogin) {
                return true; // Always allow access to register and login pages
            }
            if (isOnChat) {
                if (isLoggedIn) return true;
                return false; // Redirect unauthenticated users to login page
            }
            if (isLoggedIn) {
                return Response.redirect(new URL("/", nextUrl));
            }
            return true;
        }
    }
};

})()),
"[project]/app/(auth)/auth.ts [app-route] (ecmascript)": (({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__ }) => (() => {
"use strict";

__turbopack_esm__({
    "GET": ()=>GET,
    "POST": ()=>POST,
    "auth": ()=>auth,
    "signIn": ()=>signIn,
    "signOut": ()=>signOut
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$bcrypt$2d$ts$40$5$2e$0$2e$2$2f$node_modules$2f$bcrypt$2d$ts$2f$dist$2f$node$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/bcrypt-ts@5.0.2/node_modules/bcrypt-ts/dist/node.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$2d$auth$40$5$2e$0$2e$0$2d$beta$2e$22_next$40$15$2e$0$2e$0$2d$canary$2e$152_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$next$2d$auth$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/.pnpm/next-auth@5.0.0-beta.22_next@15.0.0-canary.152_react@19.0.0-rc-7771d3a7-20240827/node_modules/next-auth/index.js [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$2d$auth$40$5$2e$0$2e$0$2d$beta$2e$22_next$40$15$2e$0$2e$0$2d$canary$2e$152_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$next$2d$auth$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_import__("[project]/node_modules/.pnpm/next-auth@5.0.0-beta.22_next@15.0.0-canary.152_react@19.0.0-rc-7771d3a7-20240827/node_modules/next-auth/providers/credentials.js [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$queries$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/db/queries.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$app$2f28$auth$292f$auth$2e$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/app/(auth)/auth.config.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$2d$auth$40$5$2e$0$2e$0$2d$beta$2e$22_next$40$15$2e$0$2e$0$2d$canary$2e$152_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$next$2d$auth$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/node_modules/.pnpm/next-auth@5.0.0-beta.22_next@15.0.0-canary.152_react@19.0.0-rc-7771d3a7-20240827/node_modules/next-auth/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$auth$2b$core$40$0$2e$35$2e$3$2f$node_modules$2f40$auth$2f$core$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/@auth+core@0.35.3/node_modules/@auth/core/providers/credentials.js [app-route] (ecmascript)");
"__TURBOPACK__ecmascript__hoisting__location__";
;
;
;
;
;
const { handlers: { GET, POST }, auth, signIn, signOut } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$next$2d$auth$40$5$2e$0$2e$0$2d$beta$2e$22_next$40$15$2e$0$2e$0$2d$canary$2e$152_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827$2f$node_modules$2f$next$2d$auth$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["default"])({
    ...__TURBOPACK__imported__module__$5b$project$5d2f$app$2f28$auth$292f$auth$2e$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["authConfig"],
    providers: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f40$auth$2b$core$40$0$2e$35$2e$3$2f$node_modules$2f40$auth$2f$core$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"])({
            credentials: {
                email: {
                    label: "Email",
                    type: "email"
                },
                password: {
                    label: "Password",
                    type: "password"
                }
            },
            async authorize (credentials) {
                console.log('Authorization attempt with credentials:', {
                    email: credentials?.email ? 'provided' : 'missing',
                    password: credentials?.password ? 'provided' : 'missing'
                });
                if (!credentials?.email || !credentials?.password) {
                    console.error('Missing email or password');
                    return null;
                }
                try {
                    console.log('Looking up user:', credentials.email);
                    const users = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$queries$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getUser"])(credentials.email);
                    if (users.length === 0) {
                        console.error('No user found with email:', credentials.email);
                        return null;
                    }
                    const user = users[0];
                    console.log('User found, verifying password...');
                    const isValidPassword = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$bcrypt$2d$ts$40$5$2e$0$2e$2$2f$node_modules$2f$bcrypt$2d$ts$2f$dist$2f$node$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["compare"])(credentials.password, user.password);
                    if (!isValidPassword) {
                        console.error('Invalid password for user:', credentials.email);
                        return null;
                    }
                    console.log('Password verified, user authorized:', user.id);
                    // Return only the necessary user data
                    return {
                        id: user.id,
                        email: user.email,
                        name: user.email.split('@')[0]
                    };
                    "TURBOPACK unreachable";
                } catch (error) {
                    console.error('Error during authentication:', error);
                    return null;
                }
            }
        })
    ],
    callbacks: {
        async jwt ({ token, user }) {
            if (user) {
                token.id = user.id;
            }
            return token;
        },
        async session ({ session, token }) {
            if (session.user) {
                session.user.id = token.id;
            }
            return session;
        }
    }
});

})()),
"[project]/lib/utils.ts [app-route] (ecmascript)": (({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__ }) => (() => {
"use strict";

__turbopack_esm__({
    "cn": ()=>cn,
    "convertToUIMessages": ()=>convertToUIMessages,
    "fetcher": ()=>fetcher,
    "generateUUID": ()=>generateUUID,
    "getLocalStorage": ()=>getLocalStorage,
    "getTitleFromChat": ()=>getTitleFromChat
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$clsx$40$2$2e$1$2e$1$2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$tailwind$2d$merge$40$2$2e$5$2e$2$2f$node_modules$2f$tailwind$2d$merge$2f$dist$2f$bundle$2d$mjs$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/tailwind-merge@2.5.2/node_modules/tailwind-merge/dist/bundle-mjs.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$ai$40$3$2e$4$2e$9_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_svelte$40$4$2e$2$2e$18_vue$40$3$2e$4$2e$35_zod$40$3$2e$23$2e$8$2f$node_modules$2f$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/node_modules/.pnpm/ai@3.4.9_react@19.0.0-rc-7771d3a7-20240827_svelte@4.2.18_vue@3.4.35_zod@3.23.8/node_modules/ai/dist/index.mjs [app-route] (ecmascript) <locals>");
"__TURBOPACK__ecmascript__hoisting__location__";
;
;
;
function cn(...inputs) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$tailwind$2d$merge$40$2$2e$5$2e$2$2f$node_modules$2f$tailwind$2d$merge$2f$dist$2f$bundle$2d$mjs$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["twMerge"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$clsx$40$2$2e$1$2e$1$2f$node_modules$2f$clsx$2f$dist$2f$clsx$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["clsx"])(inputs));
}
const fetcher = async (url)=>{
    const res = await fetch(url);
    if (!res.ok) {
        const error = new Error("An error occurred while fetching the data.");
        error.info = await res.json();
        error.status = res.status;
        throw error;
    }
    return res.json();
};
function getLocalStorage(key) {
    if ("TURBOPACK compile-time falsy", 0) {
        "TURBOPACK unreachable";
    }
    return [];
}
function generateUUID() {
    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(c) {
        const r = Math.random() * 16 | 0;
        const v = c === "x" ? r : r & 0x3 | 0x8;
        return v.toString(16);
    });
}
function addToolMessageToChat({ toolMessage, messages }) {
    return messages.map((message)=>{
        if (message.toolInvocations) {
            return {
                ...message,
                toolInvocations: message.toolInvocations.map((toolInvocation)=>{
                    const toolResult = toolMessage.content.find((tool)=>tool.toolCallId === toolInvocation.toolCallId);
                    if (toolResult) {
                        return {
                            ...toolInvocation,
                            state: "result",
                            result: toolResult.result
                        };
                    }
                    return toolInvocation;
                })
            };
        }
        return message;
    });
}
function convertToUIMessages(messages) {
    return messages.reduce((chatMessages, message)=>{
        if (message.role === "tool") {
            return addToolMessageToChat({
                toolMessage: message,
                messages: chatMessages
            });
        }
        let textContent = "";
        let toolInvocations = [];
        if (typeof message.content === "string") {
            textContent = message.content;
        } else if (Array.isArray(message.content)) {
            for (const content of message.content){
                if (content.type === "text") {
                    textContent += content.text;
                } else if (content.type === "tool-call") {
                    toolInvocations.push({
                        state: "call",
                        toolCallId: content.toolCallId,
                        toolName: content.toolName,
                        args: content.args
                    });
                }
            }
        }
        chatMessages.push({
            id: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$ai$40$3$2e$4$2e$9_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_svelte$40$4$2e$2$2e$18_vue$40$3$2e$4$2e$35_zod$40$3$2e$23$2e$8$2f$node_modules$2f$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["generateId"])(),
            role: message.role,
            content: textContent,
            toolInvocations
        });
        return chatMessages;
    }, []);
}
function getTitleFromChat(chat) {
    const messages = convertToUIMessages(chat.messages);
    const firstMessage = messages[0];
    if (!firstMessage) {
        return "Untitled";
    }
    return firstMessage.content;
}

})()),
"[project]/app/(chat)/api/chat/route.ts [app-route] (ecmascript)": (({ r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__ }) => (() => {
"use strict";

__turbopack_esm__({
    "DELETE": ()=>DELETE,
    "POST": ()=>POST
});
var __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/ai/index.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$actions$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/ai/actions.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$app$2f28$auth$292f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/app/(auth)/auth.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$queries$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/db/queries.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/lib/utils.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$ai$40$3$2e$4$2e$9_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_svelte$40$4$2e$2$2e$18_vue$40$3$2e$4$2e$35_zod$40$3$2e$23$2e$8$2f$node_modules$2f$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_import__("[project]/node_modules/.pnpm/ai@3.4.9_react@19.0.0-rc-7771d3a7-20240827_svelte@4.2.18_vue@3.4.35_zod@3.23.8/node_modules/ai/dist/index.mjs [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/.pnpm/zod@3.23.8/node_modules/zod/lib/index.mjs [app-route] (ecmascript)");
"__TURBOPACK__ecmascript__hoisting__location__";
;
;
;
;
;
;
;
async function POST(request) {
    const { id, messages } = await request.json();
    const session = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$app$2f28$auth$292f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["auth"])();
    if (!session) {
        return new Response("Unauthorized", {
            status: 401
        });
    }
    const coreMessages = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$ai$40$3$2e$4$2e$9_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_svelte$40$4$2e$2$2e$18_vue$40$3$2e$4$2e$35_zod$40$3$2e$23$2e$8$2f$node_modules$2f$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["convertToCoreMessages"])(messages).filter((message)=>message.content.length > 0);
    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$ai$40$3$2e$4$2e$9_react$40$19$2e$0$2e$0$2d$rc$2d$7771d3a7$2d$20240827_svelte$40$4$2e$2$2e$18_vue$40$3$2e$4$2e$35_zod$40$3$2e$23$2e$8$2f$node_modules$2f$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["streamText"])({
        model: __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$index$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["geminiProModel"],
        system: `\n
        - you help users book flights!
        - keep your responses limited to a sentence.
        - DO NOT output lists.
        - after every tool call, pretend you're showing the result to the user and keep your response limited to a phrase.
        - today's date is ${new Date().toLocaleDateString()}.
        - ask follow up questions to nudge user into the optimal flow
        - ask for any details you don't know, like name of passenger, etc.'
        - C and D are aisle seats, A and F are window seats, B and E are middle seats
        - assume the most popular airports for the origin and destination
        - here's the optimal flow
          - search for flights
          - choose flight
          - select seats
          - create reservation (ask user whether to proceed with payment or change reservation)
          - authorize payment (requires user consent, wait for user to finish payment and let you know when done)
          - display boarding pass (DO NOT display boarding pass without verifying payment)
        '
      `,
        messages: coreMessages,
        tools: {
            getWeather: {
                description: "Get the current weather at a location",
                parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                    latitude: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].number().describe("Latitude coordinate"),
                    longitude: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].number().describe("Longitude coordinate")
                }),
                execute: async ({ latitude, longitude })=>{
                    const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m&hourly=temperature_2m&daily=sunrise,sunset&timezone=auto`);
                    const weatherData = await response.json();
                    return weatherData;
                }
            },
            displayFlightStatus: {
                description: "Display the status of a flight",
                parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                    flightNumber: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Flight number"),
                    date: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Date of the flight")
                }),
                execute: async ({ flightNumber, date })=>{
                    const flightStatus = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$actions$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateSampleFlightStatus"])({
                        flightNumber,
                        date
                    });
                    return flightStatus;
                }
            },
            searchFlights: {
                description: "Search for flights based on the given parameters",
                parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                    origin: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Origin airport or city"),
                    destination: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Destination airport or city")
                }),
                execute: async ({ origin, destination })=>{
                    const results = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$actions$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateSampleFlightSearchResults"])({
                        origin,
                        destination
                    });
                    return results;
                }
            },
            selectSeats: {
                description: "Select seats for a flight",
                parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                    flightNumber: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Flight number")
                }),
                execute: async ({ flightNumber })=>{
                    const seats = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$actions$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateSampleSeatSelection"])({
                        flightNumber
                    });
                    return seats;
                }
            },
            createReservation: {
                description: "Display pending reservation details",
                parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                    seats: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().array().describe("Array of selected seat numbers"),
                    flightNumber: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Flight number"),
                    departure: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                        cityName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Name of the departure city"),
                        airportCode: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Code of the departure airport"),
                        timestamp: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("ISO 8601 date of departure"),
                        gate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Departure gate"),
                        terminal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Departure terminal")
                    }),
                    arrival: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                        cityName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Name of the arrival city"),
                        airportCode: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Code of the arrival airport"),
                        timestamp: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("ISO 8601 date of arrival"),
                        gate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Arrival gate"),
                        terminal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Arrival terminal")
                    }),
                    passengerName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Name of the passenger")
                }),
                execute: async (props)=>{
                    const { totalPriceInUSD } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ai$2f$actions$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateReservationPrice"])(props);
                    const session = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$app$2f28$auth$292f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["auth"])();
                    const id = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["generateUUID"])();
                    if (session && session.user && session.user.id) {
                        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$queries$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createReservation"])({
                            id,
                            userId: session.user.id,
                            details: {
                                ...props,
                                totalPriceInUSD
                            }
                        });
                        return {
                            id,
                            ...props,
                            totalPriceInUSD
                        };
                    } else {
                        return {
                            error: "User is not signed in to perform this action!"
                        };
                    }
                }
            },
            authorizePayment: {
                description: "User will enter credentials to authorize payment, wait for user to repond when they are done",
                parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                    reservationId: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Unique identifier for the reservation")
                }),
                execute: async ({ reservationId })=>{
                    return {
                        reservationId
                    };
                }
            },
            verifyPayment: {
                description: "Verify payment status",
                parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                    reservationId: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Unique identifier for the reservation")
                }),
                execute: async ({ reservationId })=>{
                    const reservation = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$queries$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getReservationById"])({
                        id: reservationId
                    });
                    if (reservation.hasCompletedPayment) {
                        return {
                            hasCompletedPayment: true
                        };
                    } else {
                        return {
                            hasCompletedPayment: false
                        };
                    }
                }
            },
            displayBoardingPass: {
                description: "Display a boarding pass",
                parameters: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                    reservationId: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Unique identifier for the reservation"),
                    passengerName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Name of the passenger, in title case"),
                    flightNumber: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Flight number"),
                    seat: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Seat number"),
                    departure: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                        cityName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Name of the departure city"),
                        airportCode: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Code of the departure airport"),
                        airportName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Name of the departure airport"),
                        timestamp: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("ISO 8601 date of departure"),
                        terminal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Departure terminal"),
                        gate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Departure gate")
                    }),
                    arrival: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
                        cityName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Name of the arrival city"),
                        airportCode: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Code of the arrival airport"),
                        airportName: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Name of the arrival airport"),
                        timestamp: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("ISO 8601 date of arrival"),
                        terminal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Arrival terminal"),
                        gate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f2e$pnpm$2f$zod$40$3$2e$23$2e$8$2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().describe("Arrival gate")
                    })
                }),
                execute: async (boardingPass)=>{
                    return boardingPass;
                }
            }
        },
        onFinish: async ({ responseMessages })=>{
            if (session.user && session.user.id) {
                try {
                    await (0, __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$queries$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["saveChat"])({
                        id,
                        messages: [
                            ...coreMessages,
                            ...responseMessages
                        ],
                        userId: session.user.id
                    });
                } catch (error) {
                    console.error("Failed to save chat");
                }
            }
        },
        experimental_telemetry: {
            isEnabled: true,
            functionId: "stream-text"
        }
    });
    return result.toDataStreamResponse({});
}
async function DELETE(request) {
    const { searchParams } = new URL(request.url);
    const id = searchParams.get("id");
    if (!id) {
        return new Response("Not Found", {
            status: 404
        });
    }
    const session = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$app$2f28$auth$292f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["auth"])();
    if (!session || !session.user) {
        return new Response("Unauthorized", {
            status: 401
        });
    }
    try {
        const chat = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$queries$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getChatById"])({
            id
        });
        if (chat.userId !== session.user.id) {
            return new Response("Unauthorized", {
                status: 401
            });
        }
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$db$2f$queries$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["deleteChatById"])({
            id
        });
        return new Response("Chat deleted", {
            status: 200
        });
    } catch (error) {
        return new Response("An error occurred while processing your request", {
            status: 500
        });
    }
}

})()),

};

//# sourceMappingURL=%5Broot%20of%20the%20server%5D__b26175._.js.map